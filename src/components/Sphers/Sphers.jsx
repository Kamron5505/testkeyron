import React, { useRef, useEffect, useState } from "react";
import { Swiper, SwiperSlide } from "swiper/react";
import "swiper/css";
import "swiper/css/navigation";
import { Navigation } from "swiper/modules";

import arrowLeft from "../../assets/icons/arrow-left.svg";
import arrowRight from "../../assets/icons/arrow-right.svg";
import "./Sphers.css";

const Sphers = () => {
    const prevRef = useRef(null);
    const nextRef = useRef(null);
    const swiperRef = useRef(null);
    const [activeIndex, setActiveIndex] = useState(0);

    const indicatorsCount = 8;

    const slides = [
        {
            title: "Финансов",
            text: "Большой опыт в финансовой отрасли позволяет нам разрабатывать приложения в соответствии с вашими требованиями. Надежное бухгалтерское ПО, комплексные инструменты планирования бюджета, передовые решения по управлению рисками или эффективные системы финансовой отчетности — наша команда может создать индивидуальные решения, которые помогут оптимизировать ваши финансовые процессы и будут способствовать развитию вашего бизнеса."
        },
        {
            title: "IT",
            text: "Многолетний опыт в сфере IT дает нам возможность разрабатывать современные и надежные технологии. Мы создаем мобильные и веб-приложения, системы автоматизации бизнес-процессов, облачные сервисы и платформы для аналитики. Наши решения обеспечивают масштабируемость, безопасность и эффективность, что позволяет компаниям уверенно расти, сокращать затраты и добиваться стабильных результатов в условиях постоянных технологических изменений."
        },
        {
            title: "Маркетинг",
            text: "Знания в области маркетинга помогают нам разрабатывать стратегии, которые усиливают бренд и увеличивают продажи. Мы создаем комплексные digital-кампании, внедряем SEO и аналитику, развиваем социальные сети и выстраиваем работу с клиентами. Наши решения ориентированы на рост узнаваемости, привлечение новых потребителей и укрепление позиции бизнеса на рынке, что обеспечивает устойчивое развитие и долгосрочные конкурентные преимущества."
        },
        {
            title: "HR",
            text: "Большой опыт в управлении персоналом позволяет нам оптимизировать HR-процессы компаний любого масштаба. Мы разрабатываем системы для подбора и адаптации сотрудников, автоматизируем учет рабочего времени и KPI, создаем обучающие платформы и внутренние коммуникационные инструменты. Такие решения помогают повысить вовлеченность команды, упростить администрирование и сделать управление людьми максимально эффективным и современным."
        },
        {
            title: "Образование",
            text: "Глубокое понимание образовательной сферы дает нам возможность создавать инновационные решения для обучения. Мы разрабатываем e-learning платформы, интегрируем VR/AR технологии, создаем адаптивные тесты и интерактивные курсы. Такие системы делают процесс получения знаний увлекательным и продуктивным, помогают студентам развиваться, а компаниям — эффективно обучать сотрудников, повышая их квалификацию и вовлеченность."
        },
        {
            title: "Логистика",
            text: "Наш опыт в сфере логистики помогает разрабатывать комплексные системы управления поставками и транспортировкой. Мы создаем решения для мониторинга грузов, прогнозирования спроса, автоматизации складов и оптимизации маршрутов. Такие технологии снижают издержки, ускоряют доставку и повышают надежность процессов. Благодаря этому компании могут контролировать все этапы цепочки поставок и обеспечивать высокий уровень сервиса."
        },
        {
            title: "Энергетика",
            text: "Накопленные знания в энергетической отрасли позволяют нам предлагать инновационные решения для эффективного управления ресурсами. Мы внедряем системы мониторинга, автоматизации и анализа потребления, что помогает снизить затраты и повысить надежность работы предприятий. Наши технологии ориентированы на устойчивое развитие, бережное использование энергии и поддержку современных экологических стандартов, что делает бизнес более эффективным."
        },
        {
            title: "Туризм",
            text: "Опыт в туристической отрасли дает нам возможность создавать платформы и сервисы, которые делают путешествия удобными и персонализированными. Мы интегрируем онлайн-бронирование, рекомендации, маршруты и аналитику поведения клиентов. Наши решения помогают компаниям улучшать сервис, предлагать уникальный опыт, повышать лояльность и привлекать больше туристов, создавая конкурентные преимущества на быстрорастущем рынке."
        },
    ];

    useEffect(() => {
        if (swiperRef.current && swiperRef.current.params) {
            swiperRef.current.params.navigation.prevEl = prevRef.current;
            swiperRef.current.params.navigation.nextEl = nextRef.current;
            swiperRef.current.navigation.init();
            swiperRef.current.navigation.update();

            swiperRef.current.on("slideChange", () => {
                setActiveIndex(swiperRef.current.realIndex);
            });
        }
    }, []);

    const goToSlide = (index) => {
        if (swiperRef.current) swiperRef.current.slideToLoop(index);
    };

    return (
        <section className="spheres">
            <div className="container">
                <div className="spheres__wrapper">
                <h2 className="spheres__title title">Работаем в сферах</h2>

                    <div className="spheres__pagination">
                        <div className="indicators">
                            {Array.from({ length: indicatorsCount }).map((_, i) => (
                                <div
                                    key={i}
                                    className={`live-pagination ${i === activeIndex ? "active" : ""}`}
                                    onClick={() => goToSlide(i)}
                                ></div>
                            ))}
                        </div>
                        <div className="arrow-buttons">
                            <img ref={prevRef} className="arrow" src={arrowLeft} alt="prev" />
                            <img ref={nextRef} className="arrow" src={arrowRight} alt="next" />

                        </div>
                    </div>
                </div>

                <Swiper
                    modules={[Navigation]}
                    spaceBetween={30}
                    slidesPerView={1}
                    loop={true}
                    onSwiper={(swiper) => (swiperRef.current = swiper)}
                    className="swiper"
                >
                    {slides.map((slide, index) => (
                        <SwiperSlide key={index}>
                            <div className="spheres__card">
                                <h3 className="spheres__card-title">{slide.title}</h3>
                                <p className="spheres__card-text">{slide.text}</p>
                            </div>
                        </SwiperSlide>
                    ))}
                </Swiper>
            </div>
        </section>

    );
};

export default Sphers;
